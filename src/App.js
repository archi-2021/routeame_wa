import Maps from './components/google-maps/maps.js';
import styled from 'styled-components';

import markers from './utilities/markers';

const StyledMapContainer = styled.div`
  height: 100%;
  width: 100%;
`

function App() {

  const handleGoogleMapsApiLoaded = (map, maps) => {
    const domRepCoords = [{ lng: -71.67832946777344, lat: 19.09888076782227 },
    { lng: -71.62944030761719, lat: 19.21970939636231 },
    { lng: -71.69638061523438, lat: 19.24165916442871 },
    { lng: -71.76695251464844, lat: 19.33193969726563 },
    { lng: -71.73972320556641, lat: 19.34555053710938 },
    { lng: -71.69220733642578, lat: 19.49832916259766 },
    { lng: -71.75148010253906, lat: 19.70017051696777 },
    { lng: -71.7197265625, lat: 19.69749069213868 },
    { lng: -71.74057006835938, lat: 19.76749038696289 },
    { lng: -71.77725219726562, lat: 19.77276992797852 },
    { lng: -71.60556030273438, lat: 19.90221977233887 },
    { lng: -71.48583984375, lat: 19.90472030639648 },
    { lng: -71.26112365722656, lat: 19.82304954528809 },
    { lng: -71.02916717529297, lat: 19.92832946777344 },
    { lng: -70.96028137207031, lat: 19.90027046203613 },
    { lng: -70.84861755371094, lat: 19.90498924255371 },
    { lng: -70.635009765625, lat: 19.76082992553711 },
    { lng: -70.45500183105469, lat: 19.78359985351563 },
    { lng: -70.30333709716797, lat: 19.65498924255371 },
    { lng: -70.125, lat: 19.62083053588867 },
    { lng: -69.98056030273438, lat: 19.6786003112793 },
    { lng: -69.89862060546876, lat: 19.63721084594727 },
    { lng: -69.88166809082031, lat: 19.60026931762695 },
    { lng: -69.87806701660156, lat: 19.44499969482422 },
    { lng: -69.75862121582031, lat: 19.29221916198731 },
    { lng: -69.26889038085938, lat: 19.34888076782227 },
    { lng: -69.2327880859375, lat: 19.36527061462402 },
    { lng: -69.24083709716797, lat: 19.28998947143555 },
    { lng: -69.16251373291016, lat: 19.30110931396484 },
    { lng: -69.21666717529297, lat: 19.18804931640625 },
    { lng: -69.60973358154297, lat: 19.22665977478027 },
    { lng: -69.63722229003906, lat: 19.1161003112793 },
    { lng: -69.62361145019531, lat: 19.08916091918945 },
    { lng: -69.41555786132812, lat: 19.1058292388916 },
    { lng: -69.19862365722656, lat: 19.01333045959473 },
    { lng: -69.13863372802734, lat: 19.01165962219238 },
    { lng: -68.99918365478516, lat: 19.0152702331543 },
    { lng: -68.92668151855469, lat: 19.03083038330078 },
    { lng: -68.64418029785156, lat: 18.87416076660156 },
    { lng: -68.34638977050781, lat: 18.64443969726563 },
    { lng: -68.32224273681641, lat: 18.60666084289551 },
    { lng: -68.45001220703125, lat: 18.3558292388916 },
    { lng: -68.51918029785156, lat: 18.34416007995606 },
    { lng: -68.59530639648438, lat: 18.37833023071289 },
    { lng: -68.6380615234375, lat: 18.21332931518555 },
    { lng: -68.74778747558594, lat: 18.19887924194336 },
    { lng: -68.82972717285156, lat: 18.35360908508301 },
    { lng: -68.95445251464844, lat: 18.41805076599121 },
    { lng: -69.05972290039062, lat: 18.39055061340332 },
    { lng: -69.31500244140625, lat: 18.4447193145752 },
    { lng: -69.3255615234375, lat: 18.4263801574707 },
    { lng: -69.62610626220703, lat: 18.40637969970703 },
    { lng: -69.69084167480469, lat: 18.45554924011231 },
    { lng: -69.8819580078125, lat: 18.46944046020508 },
    { lng: -70.01390075683594, lat: 18.41555023193359 },
    { lng: -70.15416717529297, lat: 18.23306083679199 },
    { lng: -70.55751037597656, lat: 18.20582962036133 },
    { lng: -70.58612060546875, lat: 18.40166091918945 },
    { lng: -70.66445922851562, lat: 18.43498992919922 },
    { lng: -70.71250915527344, lat: 18.41360092163086 },
    { lng: -70.71278381347656, lat: 18.37638092041016 },
    { lng: -70.75306701660156, lat: 18.34609985351563 },
    { lng: -70.85001373291016, lat: 18.34444046020508 },
    { lng: -70.91388702392578, lat: 18.26638031005859 },
    { lng: -70.94862365722656, lat: 18.25304985046387 },
    { lng: -71.026123046875, lat: 18.30526924133301 },
    { lng: -71.0755615234375, lat: 18.30415916442871 },
    { lng: -71.10334777832031, lat: 18.24583053588867 },
    { lng: -71.05500793457031, lat: 18.15110015869141 },
    { lng: -71.26722717285156, lat: 17.84666061401367 },
    { lng: -71.39666748046875, lat: 17.61833000183106 },
    { lng: -71.44277954101562, lat: 17.62916946411133 },
    { lng: -71.51139831542969, lat: 17.74054908752441 },
    { lng: -71.67668151855469, lat: 17.75915908813477 },
    { lng: -71.62806701660156, lat: 17.81805038452148 },
    { lng: -71.66166687011719, lat: 17.95999908447266 },
    { lng: -71.77147674560547, lat: 18.05422973632813 },
    { lng: -71.74889373779297, lat: 18.09555053710938 },
    { lng: -71.76917266845703, lat: 18.20220947265625 },
    { lng: -71.69471740722656, lat: 18.32221984863281 },
    { lng: -71.9102783203125, lat: 18.44194030761719 },
    { lng: -71.885009765625, lat: 18.47720909118652 },
    { lng: -71.94635009765625, lat: 18.54245948791504 },
    { lng: -71.99152374267578, lat: 18.60858917236328 },
    { lng: -71.97084045410156, lat: 18.62416076660156 },
    { lng: -71.88751220703125, lat: 18.61137962341309 },
    { lng: -71.72638702392578, lat: 18.71610069274902 },
    { lng: -71.7100067138672, lat: 18.79888916015625 },
    { lng: -71.77916717529297, lat: 18.9577693939209 },
    { lng: -71.8538818359375, lat: 18.96887969970703 },
    { lng: -71.67832946777344, lat: 19.09888076782227 }]


    // Construct the polygon.
    const domRepPoly = new maps.Polygon({
      paths: domRepCoords,
      strokeColor: "#FF0000",
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: "#FF0000",
      fillOpacity: 0.8,
    });

    domRepPoly.setMap(map);

    const outsideMarkers = [];
    markers.markers.forEach(marker => {
      const point = new maps.LatLng(marker.feature.geometry.coordinates[0], marker.feature.geometry.coordinates[1])
      const result = maps.geometry.poly.containsLocation(
        point,
        domRepPoly
      )
      if (!result) outsideMarkers.push(marker)

    });

    console.log(JSON.stringify(outsideMarkers));


    console.log(domRepPoly)
  }

  return (
    <StyledMapContainer id='map'>
      <Maps
        center={{ lng: -71.67832946777344, lat: 19.09888076782227 }}
        zoom={8}
        handleApiLoaded={handleGoogleMapsApiLoaded}

      >

      </Maps>

    </StyledMapContainer>
  );
}

export default App;
